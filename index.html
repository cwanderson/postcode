<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="https://rawgit.com/janl/mustache.js/master/mustache.js"></script>
    <script src="https://rawgit.com/jonnyreeves/jquery-Mustache/master/jquery.mustache.js"></script>
    <script type="text/javascript">
      $(document).ready(function() {
        $('#submit').button().click(function() {
           $('#addressesPanel').remove();
          findPostcode();
        });
      });

      function findPostcode() {
        var postcode = $('#postcodeInput').val();
        $.ajax({ 
          url: "https://hermes-test.apigee.net/v1/address/" + postcode + "?apikey=SUzeWOQSyvYmHtNpE60uryI4NDGNHSBk", 
          type: 'GET', 
          dataType: 'json',
          success: function(viewData) {
            $.Mustache.load('postcode.mustache')
              .done(
                function () {
                  $('body').mustache('address-list', viewData);
                }
              );
          },
          error:function(data,status,er) { 
            $.Mustache.load('postcode.mustache')
              .done(
                function () {
                  $('body').mustache('address-list', data);
                }
              );
          }
        });
      }
    </script>
    <style>
      body {
        position: relative;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div>
        <h2>Hermes Address Finder</h2>
      </div>
      <div id="postcodeForm">	
        <form class="form-inline" id="form" name="form">
          <div class="form-group">
            <input type="text" class="form-control" id="postcodeInput" name="postcodeInput" placeHolder="Enter postcode">
            <button id="submit" type="button" class="btn btn-primary">Find Address</button>
          </div>
        </form>
      </div>
    </div>
  </body>
</html>
